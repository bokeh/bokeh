require([
  'main'
], (Bokeh) ->

  data_orig = [
    {"x": 1346630700000, "y": 3.558},
    {"x": 1346630760000, "y": 3.754},
    {"x": 1346630820000, "y": 3.843},
    {"x": 1346631240000, "y": 3.272},
    {"x": 1346631420000, "y": 3.158},
    {"x": 1346631540000, "y": 3.843},
    {"x": 1346631600000, "y": 3.183},
    {"x": 1346631660000, "y": 3.040},
    {"x": 1346631780000, "y": 1.224},
    {"x": 1346632080000, "y": 3.082},
    {"x": 1346632140000, "y": 1.985},
    {"x": 1346632200000, "y": 3.155},
    {"x": 1346632320000, "y": 3.126},
    {"x": 1346632620000, "y": 1.414},
    {"x": 1346632680000, "y": 3.187},
    {"x": 1346633520000, "y": 3.183},
    {"x": 1346633640000, "y": 3.183},
    {"x": 1346634240000, "y": 3.107},
    {"x": 1346634480000, "y": 3.307},
    {"x": 1346634720000, "y": 3.272},
    {"x": 1346634900000, "y": 3.272},
    {"x": 1346635260000, "y": 3.517},
    {"x": 1346635860000, "y": 3.183},
    {"x": 1346635980000, "y": 3.387},
    {"x": 1346636100000, "y": 1.756},
    {"x": 1346636520000, "y": 3.387},
    {"x": 1346636700000, "y": 3.044},
    {"x": 1346637660000, "y": 3.387},
    {"x": 1346638260000, "y": 3.196},
    {"x": 1346638440000, "y": 3.272},
    {"x": 1346638560000, "y": 3.311},
    {"x": 1346639160000, "y": 3.272},
    {"x": 1346639220000, "y": 3.069},
    {"x": 1346640120000, "y": 3.250},
    {"x": 1346640300000, "y": 3.012},
    {"x": 1346640360000, "y": 3.012},
    {"x": 1346640420000, "y": 3.183},
    {"x": 1346640540000, "y": 3.101},
    {"x": 1346658600000, "y": 1.985},
    {"x": 1346658660000, "y": 3.558},
    {"x": 1346658720000, "y": 5.409},
    {"x": 1346658780000, "y": 1.794},
    {"x": 1346659020000, "y": 1.985},
    {"x": 1346659080000, "y": 3.843},
    {"x": 1346659140000, "y": 3.272},
    {"x": 1346659200000, "y": 2.375},
    {"x": 1346659320000, "y": 3.843},
    {"x": 1346659500000, "y": 4.267},
    {"x": 1346659560000, "y": 3.982},
    {"x": 1346659620000, "y": 3.272},
    {"x": 1346660460000, "y": 1.921},
    {"x": 1346660820000, "y": 1.414},
    {"x": 1346660880000, "y": 3.272},
    {"x": 1346660940000, "y": 1.985},
    {"x": 1346661000000, "y": 3.843},
    {"x": 1346661120000, "y": 5.979},
    {"x": 1346661180000, "y": 4.381},
    {"x": 1346661240000, "y": 3.697},
    {"x": 1346661360000, "y": 9.974},
    {"x": 1346661420000, "y": 1.569},
    {"x": 1346661900000, "y": 3.290},
    {"x": 1346661960000, "y": 6.740},
    {"x": 1346662020000, "y": 3.294},
    {"x": 1346662080000, "y": 3.180},
    {"x": 1346662140000, "y": 3.274},
    {"x": 1346662200000, "y": 6.437},
    {"x": 1346662260000, "y": 3.294},
    {"x": 1346662500000, "y": 2.099},
    {"x": 1346662560000, "y": 2.415},
    {"x": 1346662680000, "y": 1.881},
    {"x": 1346662740000, "y": 3.938},
    {"x": 1346662800000, "y": 3.117},
    {"x": 1346662860000, "y": 3.037},
    {"x": 1346662920000, "y": 3.293},
    {"x": 1346662980000, "y": 3.292},
    {"x": 1346663040000, "y": 3.105},
    {"x": 1346663100000, "y": 1.415},
    {"x": 1346663160000, "y": 1.948},
    {"x": 1346663220000, "y": 3.355},
    {"x": 1346663280000, "y": 1.649},
    {"x": 1346663340000, "y": 3.088},
    {"x": 1346663400000, "y": 3.292},
    {"x": 1346663460000, "y": 3.239},
    {"x": 1346663520000, "y": 3.211},
    {"x": 1346663580000, "y": 1.468},
    {"x": 1346663640000, "y": 3.412},
    {"x": 1346663700000, "y": 3.294},
    {"x": 1346663760000, "y": 3.383},
    {"x": 1346663820000, "y": 3.294},
    {"x": 1346663880000, "y": 3.843},
    {"x": 1346663940000, "y": 3.355},
    {"x": 1346664000000, "y": 3.464},
    {"x": 1346664060000, "y": 1.677},
    {"x": 1346664120000, "y": 6.265},
    {"x": 1346664240000, "y": 3.729},
    {"x": 1346664300000, "y": 3.497},
    {"x": 1346664360000, "y": 14.82},
    {"x": 1346664420000, "y": 3.731},
    {"x": 1346664480000, "y": 1.469},
    {"x": 1346664540000, "y": 3.535},
  ]

  data = {
    x: (obj.x for obj in data_orig)
    y: (obj.y for obj in data_orig)
  }

  scatter = {
    type: 'Circle'
    source: 'data'
    x: 'x'
    y: 'y'
    size: 10
    fill_color: 'blue'
    fill_alpha: 0.4
    line_color: null
  }

  xaxis = {
    type: "Datetime"
    location: "below"
    grid: true
  }

  yaxis = {
    type: "auto"
    location: "left"
    grid: true
  }

  options = {
    title: "Date Demo"
    plot_width: 600
    plot_height: 600
    # TODO: (bev) fix this
    x_range: [1346630700000, 1346664540000]
    y_range: [0, 10]
  }

  $("#target").bokeh("figure", {
    options: options
    sources: { data: data }
    glyphs: [scatter]
    guides: [xaxis, yaxis]
    tools: ["Pan", "WheelZoom" ,"Resize" ,"PreviewSave"]
  })

)